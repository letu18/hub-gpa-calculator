<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUB GPA Calculator - AI Powered</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .ai-assistant {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .ai-assistant::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .ai-content {
            position: relative;
            z-index: 1;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .left-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stats-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .gpa-display {
            font-size: 3em;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 10px 0;
        }

        .grade-level {
            padding: 8px 16px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }

        .grade-excellent { background: linear-gradient(45deg, #ff6b6b, #ee5a24); }
        .grade-good { background: linear-gradient(45deg, #4834d4, #686de0); }
        .grade-fair { background: linear-gradient(45deg, #f39c12, #e67e22); }
        .grade-poor { background: linear-gradient(45deg, #95a5a6, #7f8c8d); }

        .semester-tabs {
            display: flex;
            margin-bottom: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .subject-form {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-header {
            display: grid;
            grid-template-columns: 2fr 1fr 100px 100px 100px 100px auto;
            gap: 10px;
            margin-bottom: 15px;
            font-weight: bold;
            color: #666;
            text-align: center;
        }

        .form-row {
            display: grid;
            grid-template-columns: 2fr 1fr 100px 100px 100px 100px auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-input.subject-name {
            text-align: left;
        }

        .form-input.credits {
            text-align: center;
        }

        .average-display {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
            padding: 12px;
            font-weight: bold;
            text-align: center;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #2ed573, #1e90ff);
            color: white;
        }

        .subjects-list {
            margin-top: 20px;
        }

        .subject-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: center;
        }

        .subject-scores {
            display: flex;
            gap: 10px;
            font-size: 14px;
        }

        .score-item {
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            text-align: center;
        }

        .ai-suggestions {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .suggestion-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            border-left: 4px solid #fff;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            margin: 50px auto;
            position: relative;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row, .form-header {
                grid-template-columns: 1fr;
            }
            
            .subject-item {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        .floating-ai {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            animation: float 3s ease-in-out infinite;
            z-index: 999;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .scholarship-info {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .warning-card {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-graduation-cap"></i> HUB GPA Calculator</h1>
            <p>H·ªá th·ªëng t√≠nh ƒëi·ªÉm th√¥ng minh cho sinh vi√™n ƒê·∫°i h·ªçc Ng√¢n H√†ng</p>
        </div>

        <div class="ai-assistant">
            <div class="ai-content">
                <h3><i class="fas fa-robot"></i> AI Assistant</h3>
                <p>Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI c·ªßa b·∫°n. H√£y nh·∫≠p ƒëi·ªÉm c√°c m√¥n h·ªçc ƒë·ªÉ t√¥i t√≠nh to√°n GPA v√† ƒë∆∞a ra nh·ªØng g·ª£i √Ω h·ªçc t·∫≠p ph√π h·ª£p.</p>
            </div>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <div class="semester-tabs">
                    <div class="tab active" data-semester="1">HK 1</div>
                    <div class="tab" data-semester="2">HK 2</div>
                    <div class="tab" data-semester="3">HK 3</div>
                    <div class="tab" data-semester="4">HK 4</div>
                    <div class="tab" data-semester="5">HK 5</div>
                </div>

                <div class="subject-form">
                    <h3>Th√™m m√¥n h·ªçc</h3>
                    <div class="form-header">
                        <div>T√™n m√¥n h·ªçc</div>
                        <div>T√≠n ch·ªâ</div>
                        <div>CC (10%)</div>
                        <div>BT (20%)</div>
                        <div>GK (20%)</div>
                        <div>CK (50%)</div>
                        <div>Thao t√°c</div>
                    </div>
                    <div class="form-row">
                        <input type="text" class="form-input subject-name" id="subjectName" placeholder="Nh·∫≠p t√™n m√¥n h·ªçc">
                        <input type="number" class="form-input credits" id="credits" placeholder="TC" min="1" max="10">
                        <input type="number" class="form-input" id="attendance" placeholder="0-10" min="0" max="10" step="0.1" oninput="calculateAverage()">
                        <input type="number" class="form-input" id="homework" placeholder="0-10" min="0" max="10" step="0.1" oninput="calculateAverage()">
                        <input type="number" class="form-input" id="midterm" placeholder="0-10" min="0" max="10" step="0.1" oninput="calculateAverage()">
                        <input type="number" class="form-input" id="final" placeholder="0-10" min="0" max="10" step="0.1" oninput="calculateAverage()">
                        <button class="btn btn-primary" onclick="addSubject()">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="form-row">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div class="average-display" id="averageDisplay">ƒêi·ªÉm TB: --</div>
                    </div>
                </div>

                <div class="subjects-list" id="subjectsList">
                    <!-- Danh s√°ch m√¥n h·ªçc s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
                </div>

                <div class="ai-suggestions" id="aiSuggestions">
                    <h4><i class="fas fa-lightbulb"></i> G·ª£i √Ω t·ª´ AI</h4>
                    <div id="suggestionsContent">
                        <div class="suggestion-item">
                            <strong>M·∫πo h·ªçc t·∫≠p:</strong> H√£y duy tr√¨ ƒëi·ªÉm chuy√™n c·∫ßn ·ªïn ƒë·ªãnh ƒë·ªÉ c√≥ n·ªÅn t·∫£ng ƒëi·ªÉm s·ªë t·ªët.
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="stats-card">
                    <h3>GPA H·ªçc k·ª≥ hi·ªán t·∫°i</h3>
                    <div class="gpa-display" id="currentGPA">0.00</div>
                    <div class="grade-level grade-poor" id="currentGrade">Ch∆∞a c√≥ ƒëi·ªÉm</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="gpaProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="stats-card">
                    <h3>GPA T√≠ch l≈©y</h3>
                    <div class="gpa-display" id="cumulativeGPA">0.00</div>
                    <div class="grade-level grade-poor" id="cumulativeGrade">Ch∆∞a c√≥ ƒëi·ªÉm</div>
                    <p><strong>T·ªïng t√≠n ch·ªâ:</strong> <span id="totalCredits">0</span></p>
                </div>

                <div class="stats-card">
                    <h3>Th·ªëng k√™</h3>
                    <p><strong>S·ªë m√¥n ƒë√£ h·ªçc:</strong> <span id="totalSubjects">0</span></p>
                    <p><strong>ƒêi·ªÉm trung b√¨nh:</strong> <span id="averageScore">0.00</span></p>
                    <p><strong>M√¥n cao nh·∫•t:</strong> <span id="highestSubject">--</span></p>
                    <p><strong>M√¥n th·∫•p nh·∫•t:</strong> <span id="lowestSubject">--</span></p>
                </div>

                <div class="stats-card">
                    <h3><i class="fas fa-crystal-ball"></i> D·ª± ƒëo√°n ƒëi·ªÉm</h3>
                    <button class="btn btn-primary" onclick="predictRequiredScore()" style="width: 100%;">
                        T√≠nh ƒëi·ªÉm c·∫ßn thi·∫øt
                    </button>
                </div>

                <div class="scholarship-info" id="scholarshipInfo" style="display: none;">
                    <h4><i class="fas fa-award"></i> Th√¥ng tin h·ªçc b·ªïng</h4>
                    <p id="scholarshipText"></p>
                </div>

                <div class="warning-card" id="warningCard" style="display: none;">
                    <h4><i class="fas fa-exclamation-triangle"></i> C·∫£nh b√°o h·ªçc v·ª•</h4>
                    <p id="warningText"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="floating-ai" onclick="showAIChat()">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Modal AI Chat -->
    <div class="modal" id="aiChatModal">
        <div class="modal-content">
            <span class="close" onclick="closeAIChat()">&times;</span>
            <h3><i class="fas fa-robot"></i> Chat v·ªõi AI Assistant</h3>
            <div id="chatMessages" style="height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; margin: 20px 0; border-radius: 10px;">
                <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                    <strong>AI:</strong> Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ph√¢n t√≠ch ƒëi·ªÉm s·ªë v√† ƒë∆∞a ra l·ªùi khuy√™n h·ªçc t·∫≠p. H√£y h·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨!
                </div>
            </div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chatInput" class="form-input" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." style="flex: 1;">
                <button class="btn btn-primary" onclick="sendMessage()">G·ª≠i</button>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu l∆∞u tr·ªØ
        let studentData = {
            semesters: {
                1: [], 2: [], 3: [], 4: [], 5: []
            },
            currentSemester: 1
        };

        // Load d·ªØ li·ªáu t·ª´ localStorage
        function loadData() {
            const saved = localStorage.getItem('hubGPAData');
            if (saved) {
                studentData = JSON.parse(saved);
            }
        }

        // L∆∞u d·ªØ li·ªáu v√†o localStorage
        function saveData() {
            localStorage.setItem('hubGPAData', JSON.stringify(studentData));
        }

        // T√≠nh ƒëi·ªÉm trung b√¨nh m√¥n h·ªçc theo c√¥ng th·ª©c m·ªõi: 10% + 20% + 20% + 50%
        function calculateAverage() {
            const attendance = parseFloat(document.getElementById('attendance').value) || 0;
            const homework = parseFloat(document.getElementById('homework').value) || 0;
            const midterm = parseFloat(document.getElementById('midterm').value) || 0;
            const final = parseFloat(document.getElementById('final').value) || 0;

            // Ki·ªÉm tra xem c√≥ √≠t nh·∫•t m·ªôt ƒëi·ªÉm ƒë∆∞·ª£c nh·∫≠p kh√¥ng
            if (attendance === 0 && homework === 0 && midterm === 0 && final === 0) {
                document.getElementById('averageDisplay').textContent = 'ƒêi·ªÉm TB: --';
                document.getElementById('averageDisplay').style.background = 'linear-gradient(45deg, #95a5a6, #7f8c8d)';
                return;
            }

            // T√≠nh ƒëi·ªÉm trung b√¨nh: 10% + 20% + 20% + 50%
            const average = (attendance * 0.1) + (homework * 0.2) + (midterm * 0.2) + (final * 0.5);
            
            // Hi·ªÉn th·ªã ƒëi·ªÉm trung b√¨nh
            document.getElementById('averageDisplay').textContent = `ƒêi·ªÉm TB: ${average.toFixed(2)}`;
            
            // Thay ƒë·ªïi m√†u s·∫Øc d·ª±a tr√™n ƒëi·ªÉm s·ªë
            let backgroundColor;
            if (average >= 8.5) {
                backgroundColor = 'linear-gradient(45deg, #2ed573, #1e90ff)'; // Xanh l√°
            } else if (average >= 7.0) {
                backgroundColor = 'linear-gradient(45deg, #4834d4, #686de0)'; // Xanh d∆∞∆°ng
            } else if (average >= 5.5) {
                backgroundColor = 'linear-gradient(45deg, #f39c12, #e67e22)'; // Cam
            } else {
                backgroundColor = 'linear-gradient(45deg, #ff6b6b, #ee5a24)'; // ƒê·ªè
            }
            
            document.getElementById('averageDisplay').style.background = backgroundColor;
        }

        // Chuy·ªÉn ƒë·ªïi thang ƒëi·ªÉm 10 sang thang ƒëi·ªÉm 4
        function convertTo4Scale(score10) {
            if (score10 >= 9.5) return 4.0;
            if (score10 >= 9.0) return 3.7;
            if (score10 >= 8.5) return 3.4;
            if (score10 >= 8.0) return 3.2;
            if (score10 >= 7.5) return 3.0;
            if (score10 >= 7.0) return 2.8;
            if (score10 >= 6.5) return 2.6;
            if (score10 >= 6.0) return 2.4;
            if (score10 >= 5.5) return 2.2;
            if (score10 >= 5.0) return 2.0;
            if (score10 >= 4.5) return 1.8;
            if (score10 >= 4.0) return 1.6;
            return 0.0;
        }

        // T√≠nh ƒëi·ªÉm t·ªïng k·∫øt m√¥n h·ªçc
        function calculateSubjectScore(attendance, homework, midterm, final) {
            return (attendance * 0.1) + (homework * 0.2) + (midterm * 0.2) + (final * 0.5);
        }

        // X√°c ƒë·ªãnh x·∫øp lo·∫°i
        function getGradeLevel(gpa) {
            if (gpa >= 3.6) return { text: 'Xu·∫•t s·∫Øc', class: 'grade-excellent' };
            if (gpa >= 3.2) return { text: 'Gi·ªèi', class: 'grade-good' };
            if (gpa >= 2.5) return { text: 'Kh√°', class: 'grade-fair' };
            if (gpa >= 2.0) return { text: 'Trung b√¨nh', class: 'grade-fair' };
            if (gpa >= 1.0) return { text: 'Y·∫øu', class: 'grade-poor' };
            return { text: 'K√©m', class: 'grade-poor' };
        }

        // Th√™m m√¥n h·ªçc
        function addSubject() {
            const name = document.getElementById('subjectName').value;
            const credits = parseInt(document.getElementById('credits').value);
            const attendance = parseFloat(document.getElementById('attendance').value);
            const homework = parseFloat(document.getElementById('homework').value);
            const midterm = parseFloat(document.getElementById('midterm').value);
            const final = parseFloat(document.getElementById('final').value);

            if (!name || !credits || isNaN(attendance) || isNaN(homework) || isNaN(midterm) || isNaN(final)) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }

            const totalScore = calculateSubjectScore(attendance, homework, midterm, final);
            const gpa4 = convertTo4Scale(totalScore);

            const subject = {
                id: Date.now(),
                name,
                credits,
                attendance,
                homework,
                midterm,
                final,
                totalScore: totalScore.toFixed(2),
                gpa4: gpa4.toFixed(2)
            };

            studentData.semesters[studentData.currentSemester].push(subject);
            saveData();
            
            // Clear form
            document.getElementById('subjectName').value = '';
            document.getElementById('credits').value = '';
            document.getElementById('attendance').value = '';
            document.getElementById('homework').value = '';
            document.getElementById('midterm').value = '';
            document.getElementById('final').value = '';
            
            // Reset average display
            document.getElementById('averageDisplay').textContent = 'ƒêi·ªÉm TB: --';
            document.getElementById('averageDisplay').style.background = 'linear-gradient(45deg, #667eea, #764ba2)';

            updateDisplay();
            generateAISuggestions();
        }

        // X√≥a m√¥n h·ªçc
        function deleteSubject(id) {
            studentData.semesters[studentData.currentSemester] = 
                studentData.semesters[studentData.currentSemester].filter(subject => subject.id !== id);
            saveData();
            updateDisplay();
            generateAISuggestions();
        }

        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã
        function updateDisplay() {
            displaySubjects();
            calculateGPA();
            updateStatistics();
            checkScholarship();
            checkWarnings();
        }

        // Hi·ªÉn th·ªã danh s√°ch m√¥n h·ªçc
        function displaySubjects() {
            const container = document.getElementById('subjectsList');
            const subjects = studentData.semesters[studentData.currentSemester];
            
            if (subjects.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">Ch∆∞a c√≥ m√¥n h·ªçc n√†o. H√£y th√™m m√¥n h·ªçc ƒë·∫ßu ti√™n!</p>';
                return;
            }

            container.innerHTML = subjects.map(subject => `
                <div class="subject-item">
                    <div>
                        <strong>${subject.name}</strong>
                        <br><small>${subject.credits} t√≠n ch·ªâ</small>
                    </div>
                    <div class="subject-scores">
                        <div class="score-item">CC: ${subject.attendance}</div>
                        <div class="score-item">BT: ${subject.homework}</div>
                        <div class="score-item">GK: ${subject.midterm}</div>
                        <div class="score-item">CK: ${subject.final}</div>
                    </div>
                    <div>ƒêi·ªÉm 10: <strong>${subject.totalScore}</strong></div>
                    <div>ƒêi·ªÉm 4: <strong>${subject.gpa4}</strong></div>
                    <div>
                        <span class="grade-level ${getGradeLevel(parseFloat(subject.gpa4)).class}" style="font-size: 12px; padding: 4px 8px;">
                            ${getGradeLevel(parseFloat(subject.gpa4)).text}
                        </span>
                    </div>
                    <div>
                                                <button class="btn btn-danger" onclick="deleteSubject(${subject.id})" style="padding: 8px 12px; font-size: 12px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // T√≠nh GPA
        function calculateGPA() {
            // GPA h·ªçc k·ª≥ hi·ªán t·∫°i
            const currentSubjects = studentData.semesters[studentData.currentSemester];
            let currentGPA = 0;
            let currentCredits = 0;

            if (currentSubjects.length > 0) {
                let totalPoints = 0;
                currentSubjects.forEach(subject => {
                    totalPoints += parseFloat(subject.gpa4) * subject.credits;
                    currentCredits += subject.credits;
                });
                currentGPA = totalPoints / currentCredits;
            }

            // GPA t√≠ch l≈©y
            let cumulativeGPA = 0;
            let totalCredits = 0;
            let totalPoints = 0;

            Object.values(studentData.semesters).forEach(semester => {
                semester.forEach(subject => {
                    totalPoints += parseFloat(subject.gpa4) * subject.credits;
                    totalCredits += subject.credits;
                });
            });

            if (totalCredits > 0) {
                cumulativeGPA = totalPoints / totalCredits;
            }

            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã
            document.getElementById('currentGPA').textContent = currentGPA.toFixed(2);
            document.getElementById('cumulativeGPA').textContent = cumulativeGPA.toFixed(2);
            document.getElementById('totalCredits').textContent = totalCredits;

            // C·∫≠p nh·∫≠t x·∫øp lo·∫°i
            const currentGrade = getGradeLevel(currentGPA);
            const cumulativeGrade = getGradeLevel(cumulativeGPA);

            const currentGradeElement = document.getElementById('currentGrade');
            currentGradeElement.textContent = currentGrade.text;
            currentGradeElement.className = `grade-level ${currentGrade.class}`;

            const cumulativeGradeElement = document.getElementById('cumulativeGrade');
            cumulativeGradeElement.textContent = cumulativeGrade.text;
            cumulativeGradeElement.className = `grade-level ${cumulativeGrade.class}`;

            // C·∫≠p nh·∫≠t thanh ti·∫øn ƒë·ªô
            const progressPercent = (currentGPA / 4.0) * 100;
            document.getElementById('gpaProgress').style.width = `${progressPercent}%`;
        }

        // C·∫≠p nh·∫≠t th·ªëng k√™
        function updateStatistics() {
            let totalSubjects = 0;
            let totalScore = 0;
            let highestScore = 0;
            let lowestScore = 10;
            let highestSubject = '--';
            let lowestSubject = '--';

            Object.values(studentData.semesters).forEach(semester => {
                semester.forEach(subject => {
                    totalSubjects++;
                    const score = parseFloat(subject.totalScore);
                    totalScore += score;
                    
                    if (score > highestScore) {
                        highestScore = score;
                        highestSubject = subject.name;
                    }
                    
                    if (score < lowestScore) {
                        lowestScore = score;
                        lowestSubject = subject.name;
                    }
                });
            });

            document.getElementById('totalSubjects').textContent = totalSubjects;
            document.getElementById('averageScore').textContent = totalSubjects > 0 ? (totalScore / totalSubjects).toFixed(2) : '0.00';
            document.getElementById('highestSubject').textContent = `${highestSubject} (${highestScore.toFixed(2)})`;
            document.getElementById('lowestSubject').textContent = totalSubjects > 0 ? `${lowestSubject} (${lowestScore.toFixed(2)})` : '--';
        }

        // Ki·ªÉm tra h·ªçc b·ªïng
        function checkScholarship() {
            const currentSubjects = studentData.semesters[studentData.currentSemester];
            const scholarshipCard = document.getElementById('scholarshipInfo');
            const scholarshipText = document.getElementById('scholarshipText');

            let currentCredits = 0;
            let currentGPA = 0;
            
            if (currentSubjects.length > 0) {
                let totalPoints = 0;
                currentSubjects.forEach(subject => {
                    totalPoints += parseFloat(subject.gpa4) * subject.credits;
                    currentCredits += subject.credits;
                });
                currentGPA = totalPoints / currentCredits;
            }

            if (currentCredits >= 15) {
                if (currentGPA >= 3.6) {
                    scholarshipCard.style.display = 'block';
                    scholarshipText.textContent = 'Ch√∫c m·ª´ng! B·∫°n ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng khuy·∫øn kh√≠ch h·ªçc t·∫≠p v·ªõi GPA xu·∫•t s·∫Øc!';
                } else if (currentGPA >= 3.2) {
                    scholarshipCard.style.display = 'block';
                    scholarshipText.textContent = 'B·∫°n ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng v·ªõi GPA gi·ªèi. H√£y c·ªë g·∫Øng duy tr√¨!';
                } else if (currentGPA >= 2.5) {
                    scholarshipCard.style.display = 'block';
                    scholarshipText.textContent = 'B·∫°n c√≥ th·ªÉ x√©t h·ªçc b·ªïng n·∫øu c·∫£i thi·ªán th√™m m·ªôt ch√∫t ƒëi·ªÉm s·ªë.';
                } else {
                    scholarshipCard.style.display = 'none';
                }
            } else {
                scholarshipCard.style.display = 'none';
            }
        }

        // Ki·ªÉm tra c·∫£nh b√°o h·ªçc v·ª•
        function checkWarnings() {
            const currentSubjects = studentData.semesters[studentData.currentSemester];
            const warningCard = document.getElementById('warningCard');
            const warningText = document.getElementById('warningText');

            let currentCredits = 0;
            let currentGPA = 0;
            
            if (currentSubjects.length > 0) {
                let totalPoints = 0;
                currentSubjects.forEach(subject => {
                    totalPoints += parseFloat(subject.gpa4) * subject.credits;
                    currentCredits += subject.credits;
                });
                currentGPA = totalPoints / currentCredits;
            }

            if (currentCredits < 15 && currentCredits > 0) {
                warningCard.style.display = 'block';
                warningText.textContent = 'C·∫£nh b√°o: S·ªë t√≠n ch·ªâ d∆∞·ªõi 15, b·∫°n kh√¥ng ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng v√† danh hi·ªáu.';
            } else if (currentGPA < 2.0 && currentGPA > 0) {
                warningCard.style.display = 'block';
                warningText.textContent = 'C·∫£nh b√°o h·ªçc v·ª•: GPA d∆∞·ªõi 2.0, b·∫°n c·∫ßn c·∫£i thi·ªán k·∫øt qu·∫£ h·ªçc t·∫≠p.';
            } else {
                warningCard.style.display = 'none';
            }
        }

        // T·∫°o g·ª£i √Ω AI
        function generateAISuggestions() {
            const suggestionsContainer = document.getElementById('suggestionsContent');
            const currentSubjects = studentData.semesters[studentData.currentSemester];
            
            let suggestions = [];

            if (currentSubjects.length === 0) {
                suggestions.push({
                    icon: 'fas fa-info-circle',
                    title: 'B·∫Øt ƒë·∫ßu nh·∫≠p ƒëi·ªÉm',
                    content: 'H√£y th√™m c√°c m√¥n h·ªçc v√† ƒëi·ªÉm s·ªë ƒë·ªÉ AI c√≥ th·ªÉ ph√¢n t√≠ch v√† ƒë∆∞a ra g·ª£i √Ω ph√π h·ª£p.'
                });
            } else {
                let currentGPA = 0;
                let totalPoints = 0;
                let totalCredits = 0;
                let lowestScore = 10;
                let highestScore = 0;

                currentSubjects.forEach(subject => {
                    const score = parseFloat(subject.totalScore);
                    totalPoints += parseFloat(subject.gpa4) * subject.credits;
                    totalCredits += subject.credits;
                    
                    if (score < lowestScore) lowestScore = score;
                    if (score > highestScore) highestScore = score;
                });

                currentGPA = totalPoints / totalCredits;

                // G·ª£i √Ω d·ª±a tr√™n GPA
                if (currentGPA >= 3.6) {
                    suggestions.push({
                        icon: 'fas fa-star',
                        title: 'Xu·∫•t s·∫Øc!',
                        content: 'K·∫øt qu·∫£ h·ªçc t·∫≠p c·ªßa b·∫°n r·∫•t tuy·ªát v·ªùi! H√£y duy tr√¨ phong ƒë·ªô n√†y v√† tham gia th√™m c√°c ho·∫°t ƒë·ªông ngo·∫°i kh√≥a.'
                    });
                } else if (currentGPA >= 3.2) {
                    suggestions.push({
                        icon: 'fas fa-thumbs-up',
                        title: 'K·∫øt qu·∫£ t·ªët',
                        content: 'B·∫°n ƒëang h·ªçc t·∫≠p r·∫•t t·ªët. H√£y c·ªë g·∫Øng th√™m m·ªôt ch√∫t ƒë·ªÉ ƒë·∫°t m·ª©c xu·∫•t s·∫Øc!'
                    });
                } else if (currentGPA >= 2.5) {
                    suggestions.push({
                        icon: 'fas fa-chart-line',
                        title: 'C·∫ßn c·∫£i thi·ªán',
                        content: 'H√£y t·∫≠p trung v√†o c√°c m√¥n c√≥ ƒëi·ªÉm th·∫•p v√† c·∫£i thi·ªán ph∆∞∆°ng ph√°p h·ªçc t·∫≠p.'
                    });
                } else {
                    suggestions.push({
                        icon: 'fas fa-exclamation-triangle',
                        title: 'C·∫ßn n·ªó l·ª±c h∆°n',
                        content: 'K·∫øt qu·∫£ h·ªçc t·∫≠p c·∫ßn ƒë∆∞·ª£c c·∫£i thi·ªán ƒë√°ng k·ªÉ. H√£y t√¨m ki·∫øm s·ª± h·ªó tr·ª£ t·ª´ gi·∫£ng vi√™n v√† b·∫°n b√®.'
                    });
                }

                // G·ª£i √Ω v·ªÅ m√¥n h·ªçc
                if (lowestScore < 5.0) {
                    suggestions.push({
                        icon: 'fas fa-book',
                        title: 'T·∫≠p trung v√†o m√¥n y·∫øu',
                        content: 'B·∫°n c√≥ m√¥n h·ªçc v·ªõi ƒëi·ªÉm s·ªë th·∫•p. H√£y d√†nh th√™m th·ªùi gian √¥n t·∫≠p v√† t√¨m hi·ªÉu s√¢u h∆°n.'
                    });
                }

                if (totalCredits < 15) {
                    suggestions.push({
                        icon: 'fas fa-calendar-plus',
                        title: 'ƒêƒÉng k√Ω th√™m m√¥n',
                        content: 'S·ªë t√≠n ch·ªâ hi·ªán t·∫°i ch∆∞a ƒë·ªß 15. H√£y ƒëƒÉng k√Ω th√™m m√¥n h·ªçc ƒë·ªÉ ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng.'
                    });
                }

                // G·ª£i √Ω h·ªçc t·∫≠p chung
                suggestions.push({
                    icon: 'fas fa-lightbulb',
                    title: 'M·∫πo h·ªçc t·∫≠p',
                    content: 'H√£y duy tr√¨ th√≥i quen h·ªçc ƒë·ªÅu ƒë·∫∑n, tham gia ƒë·∫ßy ƒë·ªß c√°c bu·ªïi h·ªçc v√† ho√†n th√†nh b√†i t·∫≠p ƒë√∫ng h·∫°n.'
                });
            }

            suggestionsContainer.innerHTML = suggestions.map(suggestion => `
                <div class="suggestion-item">
                    <i class="${suggestion.icon}" style="margin-right: 10px;"></i>
                    <strong>${suggestion.title}:</strong> ${suggestion.content}
                </div>
            `).join('');
        }

        // Chuy·ªÉn ƒë·ªïi h·ªçc k·ª≥
        function switchSemester(semester) {
            studentData.currentSemester = semester;
            
            // C·∫≠p nh·∫≠t tab active
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-semester="${semester}"]`).classList.add('active');
            
            updateDisplay();
            generateAISuggestions();
        }

        // Hi·ªÉn th·ªã chat AI
        function showAIChat() {
            document.getElementById('aiChatModal').style.display = 'block';
        }

        // ƒê√≥ng chat AI
        function closeAIChat() {
            document.getElementById('aiChatModal').style.display = 'none';
        }

        // G·ª≠i tin nh·∫Øn chat
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            
            // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
            chatMessages.innerHTML += `
                <div style="text-align: right; margin: 10px 0;">
                    <div style="background: #667eea; color: white; padding: 10px; border-radius: 8px; display: inline-block; max-width: 80%;">
                        <strong>B·∫°n:</strong> ${message}
                    </div>
                </div>
            `;

            // T·∫°o ph·∫£n h·ªìi AI
            const aiResponse = generateAIResponse(message);
            
            setTimeout(() => {
                chatMessages.innerHTML += `
                    <div style="margin: 10px 0;">
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; display: inline-block; max-width: 80%;">
                            <strong>AI:</strong> ${aiResponse}
                        </div>
                    </div>
                `;
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1000);

            input.value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // T·∫°o ph·∫£n h·ªìi AI
        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // T√≠nh to√°n th·ªëng k√™ hi·ªán t·∫°i
            let totalSubjects = 0;
            let totalGPA = 0;
            let totalCredits = 0;
            
            Object.values(studentData.semesters).forEach(semester => {
                semester.forEach(subject => {
                    totalSubjects++;
                    totalGPA += parseFloat(subject.gpa4) * subject.credits;
                    totalCredits += subject.credits;
                });
            });
            
            const currentGPA = totalCredits > 0 ? (totalGPA / totalCredits).toFixed(2) : 0;

            if (lowerMessage.includes('gpa') || lowerMessage.includes('ƒëi·ªÉm')) {
                return `GPA t√≠ch l≈©y hi·ªán t·∫°i c·ªßa b·∫°n l√† ${currentGPA}/4.0 v·ªõi t·ªïng ${totalCredits} t√≠n ch·ªâ. ${currentGPA >= 3.2 ? 'K·∫øt qu·∫£ r·∫•t t·ªët!' : 'H√£y c·ªë g·∫Øng c·∫£i thi·ªán th√™m nh√©!'}`;
            }
            
            if (lowerMessage.includes('h·ªçc b·ªïng') || lowerMessage.includes('scholarship')) {
                if (currentGPA >= 3.6) {
                    return 'Tuy·ªát v·ªùi! V·ªõi GPA hi·ªán t·∫°i, b·∫°n ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng khuy·∫øn kh√≠ch h·ªçc t·∫≠p. H√£y duy tr√¨ k·∫øt qu·∫£ n√†y!';
                } else if (currentGPA >= 3.2) {
                    return 'B·∫°n ƒëang c√≥ c∆° h·ªôi t·ªët ƒë·ªÉ x√©t h·ªçc b·ªïng. H√£y c·ªë g·∫Øng n√¢ng cao th√™m m·ªôt ch√∫t ƒëi·ªÉm s·ªë!';
                } else {
                    return `ƒê·ªÉ ƒë·ªß ƒëi·ªÅu ki·ªán x√©t h·ªçc b·ªïng, b·∫°n c·∫ßn GPA t·ªëi thi·ªÉu 3.2. Hi·ªán t·∫°i b·∫°n ƒëang ·ªü m·ª©c ${currentGPA}, h√£y c·ªë g·∫Øng c·∫£i thi·ªán!`;
                }
            }
            
            if (lowerMessage.includes('c·∫£i thi·ªán') || lowerMessage.includes('h·ªçc t·∫≠p')) {
                return 'M·ªôt s·ªë g·ª£i √Ω ƒë·ªÉ c·∫£i thi·ªán k·∫øt qu·∫£ h·ªçc t·∫≠p: 1) Tham gia ƒë·∫ßy ƒë·ªß c√°c bu·ªïi h·ªçc, 2) Ho√†n th√†nh b√†i t·∫≠p ƒë√∫ng h·∫°n, 3) √în t·∫≠p th∆∞·ªùng xuy√™n, 4) Tham gia nh√≥m h·ªçc t·∫≠p, 5) T√¨m ki·∫øm s·ª± h·ªó tr·ª£ khi c·∫ßn thi·∫øt.';
            }
            
            if (lowerMessage.includes('m√¥n h·ªçc') || lowerMessage.includes('subject')) {
                return `B·∫°n ƒë√£ h·ªçc t·ªïng c·ªông ${totalSubjects} m√¥n h·ªçc. H√£y cho t√¥i bi·∫øt b·∫°n mu·ªën t√¨m hi·ªÉu th√¥ng tin g√¨ c·ª• th·ªÉ v·ªÅ c√°c m√¥n h·ªçc?`;
            }
            
            if (lowerMessage.includes('t·ªët nghi·ªáp')) {
                const gradeLevel = getGradeLevel(parseFloat(currentGPA));
                return `V·ªõi GPA hi·ªán t·∫°i ${currentGPA}, b·∫°n s·∫Ω t·ªët nghi·ªáp lo·∫°i ${gradeLevel.text}. ${currentGPA >= 3.2 ? 'Ch√∫c m·ª´ng!' : 'H√£y c·ªë g·∫Øng c·∫£i thi·ªán ƒë·ªÉ c√≥ k·∫øt qu·∫£ t·ªët h∆°n!'}`;
            }

            // Ph·∫£n h·ªìi m·∫∑c ƒë·ªãnh
            const responses = [
                'T√¥i hi·ªÉu b·∫°n ƒëang quan t√¢m v·ªÅ k·∫øt qu·∫£ h·ªçc t·∫≠p. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ GPA, h·ªçc b·ªïng, c√°ch c·∫£i thi·ªán ƒëi·ªÉm s·ªë, ho·∫∑c b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o kh√°c!',
                'H√£y cho t√¥i bi·∫øt c·ª• th·ªÉ b·∫°n mu·ªën t√¨m hi·ªÉu ƒëi·ªÅu g√¨? T√¥i c√≥ th·ªÉ gi√∫p ph√¢n t√≠ch ƒëi·ªÉm s·ªë, ƒë∆∞a ra l·ªùi khuy√™n h·ªçc t·∫≠p, ho·∫∑c gi·∫£i ƒë√°p th·∫Øc m·∫Øc.',
                'T√¥i ·ªü ƒë√¢y ƒë·ªÉ h·ªó tr·ª£ b·∫°n! B·∫°n c√≥ th·ªÉ h·ªèi v·ªÅ GPA, x·∫øp lo·∫°i t·ªët nghi·ªáp, ƒëi·ªÅu ki·ªán h·ªçc b·ªïng, ho·∫∑c c√°ch c·∫£i thi·ªán k·∫øt qu·∫£ h·ªçc t·∫≠p.',
                'C·∫£m ∆°n b·∫°n ƒë√£ chat v·ªõi t√¥i! T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ph√¢n t√≠ch k·∫øt qu·∫£ h·ªçc t·∫≠p v√† ƒë∆∞a ra nh·ªØng g·ª£i √Ω h·ªØu √≠ch. B·∫°n mu·ªën bi·∫øt ƒëi·ªÅu g√¨?'
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // D·ª± ƒëo√°n ƒëi·ªÉm c·∫ßn thi·∫øt
        function predictRequiredScore() {
            const targetGPA = prompt('Nh·∫≠p GPA m·ª•c ti√™u (thang ƒëi·ªÉm 4):');
            if (!targetGPA || isNaN(targetGPA) || targetGPA < 0 || targetGPA > 4) {
                alert('Vui l√≤ng nh·∫≠p GPA h·ª£p l·ªá (0-4)!');
                return;
            }

            const remainingCredits = prompt('Nh·∫≠p s·ªë t√≠n ch·ªâ c√≤n l·∫°i d·ª± ki·∫øn:');
            if (!remainingCredits || isNaN(remainingCredits) || remainingCredits <= 0) {
                alert('Vui l√≤ng nh·∫≠p s·ªë t√≠n ch·ªâ h·ª£p l·ªá!');
                return;
            }

            // T√≠nh to√°n
            let currentTotalPoints = 0;
            let currentTotalCredits = 0;

            Object.values(studentData.semesters).forEach(semester => {
                semester.forEach(subject => {
                    currentTotalPoints += parseFloat(subject.gpa4) * subject.credits;
                    currentTotalCredits += subject.credits;
                });
            });

            const totalCreditsAfter = currentTotalCredits + parseInt(remainingCredits);
            const requiredTotalPoints = parseFloat(targetGPA) * totalCreditsAfter;
            const requiredPointsForRemaining = requiredTotalPoints - currentTotalPoints;
            const requiredGPAForRemaining = requiredPointsForRemaining / parseInt(remainingCredits);

            let message = `ƒê·ªÉ ƒë·∫°t GPA ${targetGPA}:\n`;
            message += `- GPA hi·ªán t·∫°i: ${(currentTotalPoints / currentTotalCredits).toFixed(2)}\n`;
            message += `- S·ªë t√≠n ch·ªâ hi·ªán t·∫°i: ${currentTotalCredits}\n`;
            message += `- S·ªë t√≠n ch·ªâ c√≤n l·∫°i: ${remainingCredits}\n`;
            message += `- GPA c·∫ßn ƒë·∫°t cho ${remainingCredits} t√≠n ch·ªâ c√≤n l·∫°i: ${requiredGPAForRemaining.toFixed(2)}\n`;

            if (requiredGPAForRemaining > 4.0) {
                message += `\n‚ö†Ô∏è Kh√¥ng th·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u n√†y!`;
            } else if (requiredGPAForRemaining < 0) {
                message += `\nüéâ B·∫°n ƒë√£ v∆∞·ª£t m·ª•c ti√™u!`;
            } else {
                message += `\nüí° M·ª•c ti√™u c√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c!`;
            }

            alert(message);
        }

        // Export/Import functions
        function exportData() {
            const dataStr = JSON.stringify(studentData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'hub_gpa_data.json';
            link.click();
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        studentData = JSON.parse(e.target.result);
                        saveData();
                        updateDisplay();
                        generateAISuggestions();
                        alert('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c import th√†nh c√¥ng!');
                    } catch (error) {
                        alert('L·ªói khi import d·ªØ li·ªáu. Vui l√≤ng ki·ªÉm tra file!');
                    }
                };
                reader.readAsText(file);
            }
        }

        // Th√™m n√∫t Export/Import
        function addExportImportButtons() {
            const header = document.querySelector('.header');
            header.innerHTML += `
                <div style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="exportData()" style="margin-right: 10px;">
                        <i class="fas fa-download"></i> Xu·∫•t d·ªØ li·ªáu
                    </button>
                    <label class="btn btn-primary" style="cursor: pointer;">
                        <i class="fas fa-upload"></i> Nh·∫≠p d·ªØ li·ªáu
                        <input type="file" accept=".json" onchange="importData(event)" style="display: none;">
                    </label>
                </div>
            `;
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Load d·ªØ li·ªáu
            loadData();
            
            // Thi·∫øt l·∫≠p tab listeners
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchSemester(parseInt(this.dataset.semester));
                });
            });

            // X·ª≠ l√Ω Enter trong chat
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã ban ƒë·∫ßu
            updateDisplay();
            generateAISuggestions();
            addExportImportButtons();

            // ƒê√≥ng modal khi click outside
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('aiChatModal');
                if (event.target === modal) {
                    closeAIChat();
                }
            });
        });
    </script>
</body>
</html>
